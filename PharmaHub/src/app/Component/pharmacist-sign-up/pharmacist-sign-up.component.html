<!-- sign up  -->
<!-- //////////////////////////////////////////////////////// -->
<section>
  <div class="wrapper">
    <div class="title-text">
      <div class="title signup">Join PharmaHub as a Licensed Pharmacist</div>
    </div>
    <div class="form-container">
      <div class="form-inner">
        <!-- <form class="signup" #formRef="ngForm" (ngSubmit)="onSubmit(formRef)"> -->
        <form
          class="signup"
          (ngSubmit)="signup(); onSubmit(formRef)"
          #signupForm="ngForm"
          #formRef="ngForm"
        >
          <div class="fields">
            <!-- Full Name -->
            <div class="field">
              <input
                type="text"
                placeholder="Full Name"
                name="fullName"
                required
                maxlength="100"
                pattern="^[A-Za-z\s]+$"
                [(ngModel)]="fullName"
                #fullNameField="ngModel"
                [ngModelOptions]="{ standalone: true }"
              />
              <!-- Error messages -->
              <div
                *ngIf="fullNameField.invalid && fullNameField.touched"
                class="error-message"
              >
                <p *ngIf="fullNameField.errors?.['required']">
                  Full Name is required.
                </p>
                <p *ngIf="fullNameField.errors?.['maxlength']">
                  Full Name must be no more than 100 characters.
                </p>
                <p *ngIf="fullNameField.errors?.['pattern']">
                  Full Name must contain only letters and spaces.
                </p>
              </div>
            </div>
            <div class="field">
              <input
                type="text"
                placeholder="Phone Number"
                name="phoneNumber"
                required
                maxlength="14"
                minlength="14"
                pattern="^\+\d{1,3}\d{6,14}$"
                [(ngModel)]="phoneNumber"
                #phoneNumberField="ngModel"
              />
              <!-- Error messages -->
              <div
                *ngIf="phoneNumberField.invalid && phoneNumberField.touched"
                class="error-message"
              >
                <p *ngIf="phoneNumberField.errors?.['required']">
                  Phone Number is required.
                </p>
                <p *ngIf="phoneNumberField.errors?.['minlength']">
                  Phone Number must be exactly 14 digits.
                </p>
                <p *ngIf="phoneNumberField.errors?.['maxlength']">
                  Phone Number must be exactly 14 digits.
                </p>
                <p *ngIf="phoneNumberField.errors?.['pattern']">
                  type the plus sign first (+).
                </p>
              </div>
            </div>
            <!-- Email input -->
            <div class="field">
              <input
                type="email"
                placeholder="Email Address"
                required
                name="signupemail"
                [(ngModel)]="signupemail"
                #signupemailField="ngModel"
              />
              <!-- Email Validation -->
              <div
                *ngIf="signupemailField.invalid && signupemailField.touched"
                class="error"
                class="error-message"
              >
                <p *ngIf="signupemailField.errors?.['required']">
                  Email is required.
                </p>
                <p *ngIf="signupemailField.errors?.['pattern']">
                  Email must be a valid .com address.
                </p>
              </div>
            </div>
            <!-- Selected country -->
            <div class="field">
              <select
                [(ngModel)]="selectedCountry"
                name="selectedCountry"
                (change)="onCountryChange()"
                required
                class="drop-down"
              >
                <option value="" disabled selected>Select Country</option>
                <option
                  *ngFor="let country of countries"
                  [value]="country.name"
                >
                  {{ country.name }}
                </option>
              </select>
            </div>
            <!-- selected city -->
            <div class="field">
              <select
                [(ngModel)]="selectedCity"
                name="selectedCity"
                required
                class="drop-down"
              >
                <option value="" disabled selected>Select City</option>
                <option *ngFor="let city of filteredCities" [value]="city">
                  {{ city }}
                </option>
              </select>
            </div>
            <!-- Location input -->
            <div class="field">
              <input
                type="text"
                placeholder="Detailed Location"
                name="location"
                required
                maxlength="280"
                [(ngModel)]="location"
                #locationField="ngModel"
              />
              <!-- Location validation -->
              <div
                *ngIf="locationField.invalid && locationField.touched"
                class="error"
                class="error-message"
              >
                <p *ngIf="locationField.errors?.['required']">
                  Location is required.
                </p>
                <p *ngIf="locationField.errors?.['maxlength']">
                  Location must be no more than 280 characters.
                </p>
              </div>
            </div>
            <!-- Only Appear For Pharmacist -->
            <!-- Pharma Name -->
            <div class="field">
              <input
                type="text"
                placeholder="Pharma Name"
                name="pharmaName"
                required
                maxlength="100"
                [(ngModel)]="pharmaName"
                #pharmaNameField="ngModel"
              />
              <!-- Error messages -->
              <div
                *ngIf="pharmaNameField.invalid && pharmaNameField.touched"
                class="error-message"
              >
                <p *ngIf="pharmaNameField.errors?.['required']">
                  Pharma Name is required.
                </p>
                <p *ngIf="pharmaNameField.errors?.['maxlength']">
                  Pharma Name must be no more than 100 characters.
                </p>
              </div>
            </div>
            <!-- Credit card number -->
            <div class="field">
              <input
                type="text"
                placeholder="Credit Card Number"
                name="creditCard"
                required
                maxlength="16"
                minlength="16"
                pattern="^[0-9]{16}$"
                [(ngModel)]="creditCard"
                #creditCardField="ngModel"
              />
              <!-- Error messages -->
              <div
                *ngIf="creditCardField.invalid && creditCardField.touched"
                class="error-message"
              >
                <p *ngIf="creditCardField.errors?.['required']">
                  Credit Card Number is required.
                </p>
                <p *ngIf="creditCardField.errors?.['maxlength']">
                  Credit Card Number must be 16 digits.
                </p>
                <p *ngIf="creditCardField.errors?.['minlength']">
                  Credit Card Number must be 16 digits.
                </p>
                <p *ngIf="creditCardField.errors?.['pattern']">
                  Credit Card Number must contain exactly 16 digits (numbers
                  only).
                </p>
              </div>
            </div>

            <!-- open time -->
            <!-- 24 Hours Checkbox -->
            <div class="hours24Container">
              <p
                style="
                  text-align: center;
                  font-size: 1.5rem;
                  color: #2b8a3e;
                  font-weight: 500;
                "
              >
                Working Hours
              </p>
              <label for="is24Hours">
                <input
                  type="checkbox"
                  [(ngModel)]="is24Hours"
                  name="is24Hours"
                  (change)="handle24HoursChange()"
                  id="is24Hours"
                />
                Open 24 Hours
              </label>
            </div>

            <!-- Open Time -->
            <div class="field">
              <label for="open">Open Time</label>
              <input
                id="open"
                type="number"
                name="openTime"
                placeholder="Open Time (1 - 24)"
                [(ngModel)]="openTime"
                [disabled]="is24Hours"
                required
                min="1"
                max="24"
                (keydown)="preventInvalidKeys($event)"
                (input)="enforceRange('open')"
              />
              <div class="error-message" *ngIf="openTimeError">
                <p>Open time must be between 1 and 24.</p>
              </div>
            </div>

            <!-- Close Time -->
            <div class="field">
              <label for="close">Close Time</label>
              <input
                id="close"
                type="number"
                name="closeTime"
                placeholder="Close Time (1 - 24)"
                [(ngModel)]="closeTime"
                [disabled]="is24Hours"
                required
                min="1"
                max="24"
                (keydown)="preventInvalidKeys($event)"
                (input)="enforceRange('close')"
              />
              <div class="error-message" *ngIf="closeTimeError">
                <p>Close time must be between 1 and 24.</p>
              </div>
            </div>

            <!-- password input -->
            <div class="field">
              <input
                type="password"
                placeholder="Password"
                required
                name="signupPassword"
                [(ngModel)]="signupPassword"
                pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{10,}$"
                #signupPasswordField="ngModel"
              />
              <!-- password validation -->
              <div
                *ngIf="
                  signupPasswordField.invalid && signupPasswordField.touched
                "
                class="error"
                class="error-message"
              >
                <p *ngIf="signupPasswordField.errors?.['required']">
                  Password is required.
                </p>
                <p *ngIf="signupPasswordField.errors?.['pattern']">
                  at least 10 characters include uppercase, lowercase, number,
                  and special character.
                </p>
              </div>
            </div>
            <!-- confirm password -->
            <div class="field">
              <input
                type="password"
                placeholder="Confirm password"
                required
                name="confirmPassword"
                [(ngModel)]="confirmPassword"
                #confirmPasswordField="ngModel"
              />
              <!-- confirm password validation -->
              <div
                *ngIf="
                  confirmPasswordField.touched &&
                  signupPassword !== confirmPassword
                "
                class="error"
                class="error-message"
              >
                <p>Passwords do not match.</p>
              </div>
            </div>
            <!-- Pharmacist certificate input -->
            <div class="field">
              <label for="certificate" class="custom-file"
                >Upload PDF for your Pharmacy Certificate</label
              >
              <input
                id="certificate"
                type="file"
                required
                accept=".pdf"
                (change)="onFileChange($event)"
                name="certificate"
                class="certificatefield"
              />
              <!-- Error messages -->
              <div
                *ngIf="certificateTouched && certificateError"
                class="error-message"
              >
                <p *ngIf="certificateError === 'required'">
                  Certificate is required.
                </p>
                <p *ngIf="certificateError === 'invalidFile'">
                  Only PDF files are allowed.
                </p>
              </div>
            </div>
            <!-- logo input -->
            <div class="field">
              <label for="logoFileInput" class="custom-file"
                >Upload logo for your Pharmacy
              </label>
              <input
                id="logoFileInput"
                type="file"
                required
                accept=".png, .jpg, .jpeg"
                (change)="onFileChange2($event)"
                name="logoFileInput"
                class="certificatefield"
              />
              <div *ngIf="logoTouched && logoError" class="error-message">
                <p *ngIf="logoError === 'required'">Logo is required.</p>
                <p *ngIf="logoError === 'invalidType'">
                  Only .png, .jpg, or .jpeg files are allowed.
                </p>
                <p *ngIf="logoError === 'tooLarge'">
                  File size must not exceed 5MB.
                </p>
              </div>
            </div>
            <!-- submit button -->
            <!-- <div class="btn">
              <input
                type="submit"
                value="Sign up"
                [disabled]="
                  formRef.invalid || signupPassword !== confirmPassword
                "
              />
            </div> -->
            <!-- Verification Code input -->
            <div *ngIf="isCodeSent" class="field">
              <input
                type="text"
                placeholder="Enter Verification Code"
                required
                [(ngModel)]="verificationCode"
                name="verificationCode"
              />
            </div>
            <div class="btn">
              <button
                type="submit"
                [disabled]="
                  !isCodeSent ||
                  !isCodeVerified ||
                  !signupForm.valid ||
                  signupPassword !== confirmPassword
                "
                *ngIf="isCodeSent && isCodeVerified"
                style="
                  background: transparent;
                  color: #fff;
                  font-size: 20px;
                  font-weight: 500;
                "
              >
                Signup
              </button>

              <button
                type="button"
                (click)="sendVerificationCode()"
                *ngIf="!isCodeSent"
                style="
                  background: transparent;
                  color: #fff;
                  font-size: 20px;
                  font-weight: 500;
                "
              >
                Send Verification Code
              </button>
              <button
                type="button"
                (click)="verifyCode()"
                *ngIf="isCodeSent && !isCodeVerified"
                style="
                  background: transparent;
                  color: #fff;
                  font-size: 20px;
                  font-weight: 500;
                "
              >
                Verify Code
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
