<section class="packages-section" appMoveUpAnimate>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    rel="stylesheet"
  />

  <div
    class="row align-items-center justify-content-between flex-wrap section-header"
  >
    <h2 class="Heading">Explore Our Best Packages</h2>

    <!-- all packages -->
    <div class="col-12 col-md-auto mt-3 mt-md-0">
      <button
        style="border-radius: 100px"
        class="btn"
        [routerLink]="['/allpackages']"
      >
        All Packages
      </button>
    </div>
  </div>

  <div class="card-container row align-items-md-center">
    <!-- button left -->
    <!-- @if(limitedPackages.length >3){
    <button (click)="moveLeft()" class="arrow-btn left"></button>
    } -->
    <button
      *ngIf="limitedPackages.length > 3"
      (click)="moveLeft()"
      class="arrow-btn left"
    ></button>

    <!-- card body -->
    <div
      class="custom-card col-12 col-sm-6 col-md-4 col-lg-3 my-3 flip-card"
      *ngFor="let card of visibleCards; let i = index"
      [ngClass]="{ active: i === 1, 'center-card': i === 1 }"
    >
      <div class="flip-card-inner" [class.flipped]="card.isFlipped">
        <div class="flip-card-front">
          <!-- Card Image and Favourite Icon -->
          <div class="custom-card-img-container">
            <img [src]="card.imgUrl" alt="Image" class="custom-card-img" />
            <lord-icon
              class="custom-icon"
              src="./heart.json"
              trigger="hover"
              style="width: 1.3rem; height: 1.3rem"
            >
            </lord-icon>
          </div>
          <!-- cart icon and Card Name -->
          <div class="custom-card-body">
            <div
              class="row align-items-center align-content-center justify-content-between"
            >
              <h4 class="custom-card-title" style="text-align: center">
                {{ card.name }}
              </h4>
              <button>
                <lord-icon
                  src="./addcart.json"
                  trigger="hover"
                  style="width: 1.5rem; height: 1.5rem"
                  class="col-2 cart-icon"
                  (click)="addToCart(card)"
                  (click)="alertadd()"
                >
                </lord-icon>
              </button>
            </div>
            <!-- Price and Describtion -->
            <!-- <p class="custom-card-text row">Price : {{card.price | currency : 'EGP'}}</p> -->
            <p class="custom-card-text">
              Price : <strong> {{ card.price }} EGP</strong>
            </p>

            <p class="custom-card-text" style="text-align: center">
              {{ card.description.slice(0, 2).join(", ") }}
              @if (card.description.length > 2) {
              <button
                class="flip-button-1"
                (click)="card.isFlipped = !card.isFlipped"
              >
                ...See More &rarr;
              </button>

              }
            </p>
            <!-- Logo of Pharmacy -->
            <div
              class="pharma-logo-container row justify-content-center align-content-center px-2"
            >
              <img
                class="pharma-logo"
                [src]="card.imgPharm"
                alt="Pharmacy Logo"
              />
              <p class="custom-card-text row col-6 m-1">{{ card.pharmName }}</p>
            </div>
          </div>
        </div>
        <!-- Card Back Side -->
        <div class="flip-card-back">
          <p class="custom-card-text">
            {{ card.description }}
          </p>
          <button
            class="flip-button-2"
            (click)="card.isFlipped = !card.isFlipped"
          >
            Back
          </button>
        </div>
      </div>
    </div>

    <!-- button rigth -->
    <!-- @if(limitedPackages.length >3){
  <button (click)="moveRight()" class="arrow-btn right"></button>
  } -->
    <button
      *ngIf="limitedPackages.length > 3"
      (click)="moveRight()"
      class="arrow-btn right"
    ></button>
  </div>
</section>
